<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
     <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h2>Login</h2>
        <p id="errorMessage" class="error-text" style="display:none;"></p>
        <form id="loginForm">
            <input type="email" id="loginEmail" placeholder="Email" required>
            <input type="password" id="loginPassword" placeholder="Password" required>
            <button type="submit" id="loginBtn">
                <span id="btnText">Login</span>
                <span id="spinner" class="spinner" style="display:none;"></span>
            </button>
        </form>
        <a href="signup.html" class="secondary-link">New user? Sign up here</a>
    </div>
   <script>
    document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const btn = document.getElementById('loginBtn');
    const spinner = document.getElementById('spinner');
    const errorMsg = document.getElementById('errorMessage');

    btn.disabled = true;
    spinner.style.display = 'inline-block';
    errorMsg.style.display = 'none';

    setTimeout(() => {
        const emailInput = document.getElementById('loginEmail').value.trim();
        const passInput = document.getElementById('loginPassword').value;
        let savedData = null;

        try {
            savedData = JSON.parse(localStorage.getItem('registeredUser'));
        } catch (err) {
            // If parsing fails, treat as no user registered
            savedData = null;
        }

        if (!savedData || !savedData.email || !savedData.password) {
            // No registered user found
            btn.disabled = false;
            spinner.style.display = 'none';
            errorMsg.textContent = "No registered user found. Please sign up first.";
            errorMsg.style.display = 'block';
            return;
        }

        // Compare email case-insensitively, password case-sensitively
        if (emailInput.toLowerCase() === (savedData.email || '').toLowerCase() && passInput === savedData.password) {
            localStorage.setItem('isLoggedIn', 'true');
            window.location.href = 'dashboard.html';
        } else {
            btn.disabled = false;
            spinner.style.display = 'none';
            errorMsg.textContent = "Invalid email or password. Please try again.";
            errorMsg.style.display = 'block';
        }
    }, 1200);
});
   </script>
</body>
</html>