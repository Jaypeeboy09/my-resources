<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h2>Login</h2>
        <p id="errorMessage" class="error-text"></p>
        <form id="loginForm">
            <input type="email" id="loginEmail" placeholder="Email" required>
            <input type="password" id="loginPassword" placeholder="Password" required>
            <button type="submit" id="loginBtn">
                <span id="btnText">Login</span>
                <span id="spinner" class="spinner"></span>
            </button>
        </form>
        <a href="signup.html" class="secondary-link">New user? Sign up here</a>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = document.getElementById('loginBtn');
            const spinner = document.getElementById('spinner');
            const errorMsg = document.getElementById('errorMessage');

            btn.disabled = true;
            spinner.style.display = 'inline-block';
            errorMsg.style.display = 'none';

            setTimeout(() => {
                const emailInput = document.getElementById('loginEmail').value;
                const passInput = document.getElementById('loginPassword').value;
                const savedData = JSON.parse(localStorage.getItem('registeredUser'));

                if (savedData && emailInput === savedData.email && passInput === savedData.password) {
                    localStorage.setItem('isLoggedIn', 'true');
                    window.location.href = 'dashboard.html';
                } else {
                    btn.disabled = false;
                    spinner.style.display = 'none';
                    errorMsg.textContent = "Invalid credentials.";
                    errorMsg.style.display = 'block';
                }
            }, 1200);
        });
    </script>
</body>
</html>